<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulário de Vaga</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    /* Estilos Gerais */
    .remove-btn {
      color: #ef4444;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.2em;
    }
    .error-message {
      color: #ef4444;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
    .form-section {
      display: none;
    }
    .form-section.active {
      display: block;
    }
    select[multiple] {
      height: 150px;
    }
    .animate-pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.5;
      }
    }
    .optional {
      color: #6b7280;
      font-style: italic;
      font-size: 0.875rem;
    }
    .valid {
      border-color: #22c55e;
    }
    .invalid {
      border-color: #ef4444;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <div class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Cabeçalho com avisos importantes -->
    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded">
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <i class="fas fa-bullhorn text-blue-500 text-xl mr-3 mt-1"></i>
        </div>
        <div>
          <p class="font-bold text-blue-800"><i class="fas fa-exclamation-circle mr-1"></i> Este formulário garante que sua vaga seja divulgada com rapidez e visibilidade.</p>
          <p class="text-blue-700 mt-1"><i class="fas fa-exclamation-triangle mr-1"></i> Vagas sem esse envio podem demorar mais para irem ao ar.</p>
        </div>
      </div>
    </div>

    <!-- Indicador de Progresso -->
    <div class="flex mb-8 overflow-x-auto">
      <div class="flex space-x-4">
        <div id="step1" class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-green-500 flex items-center justify-center text-white font-bold">1</div>
          <div class="ml-2 text-sm font-medium text-gray-700">Dados Básicos</div>
        </div>
        <div id="step2" class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-white font-bold">2</div>
          <div class="ml-2 text-sm font-medium text-gray-700">Impulsionamento</div>
        </div>
      </div>
    </div>

    <!-- Caixa de Dicas -->
    <div class="bg-blue-100 border-l-4 border-blue-500 p-4 mb-6 rounded">
      <div class="flex items-start">
        <div class="flex-shrink-0">
          <i class="fas fa-lightbulb text-blue-500 text-xl mr-3 mt-1"></i>
        </div>
        <div>
          <p class="text-blue-800">Essa etapa ajuda o marketing a entender melhor como divulgar sua vaga.</p>
        </div>
      </div>
    </div>

    <form id="vagaForm" class="bg-white shadow-md rounded-lg p-6">
      <!-- Seção 1 - Dados da Vaga -->
      <section id="sessao1" class="form-section active">
        <h2 class="text-2xl font-bold text-blue-700 border-b border-blue-200 pb-3 mb-6 flex items-center">
          <i class="fas fa-file-alt mr-2"></i> Sessão 1 - Dados da Vaga
        </h2>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="analista">
            Nome do analista <span class="text-red-500">*</span>
            <span class="text-blue-500 cursor-help ml-1" title="Insira o nome completo do analista responsável">
              <i class="fas fa-info-circle"></i>
            </span>
          </label>
          <input id="analista" name="analista" type="text" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="whatsapp">
            WhatsApp <span class="text-red-500">*</span>
            <span class="text-blue-500 cursor-help ml-1" title="Insira o número de WhatsApp com DDD">
              <i class="fas fa-info-circle"></i>
            </span>
          </label>
          <input id="whatsapp" name="whatsapp" type="tel" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="divulgaLogo">
            Pode divulgar a logo? <span class="text-red-500">*</span>
            <span class="text-blue-500 cursor-help ml-1" title="Selecione se a logo da empresa pode ser divulgada">
              <i class="fas fa-info-circle"></i>
            </span>
          </label>
          <select id="divulgaLogo" name="divulgaLogo" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
        </div>
        
        <div id="avisoLogo" class="hidden bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4 rounded">
          <div class="flex items-start">
            <div class="flex-shrink-0">
              <i class="fas fa-info-circle text-yellow-500 text-xl mr-3 mt-1"></i>
            </div>
            <div>
              <p class="text-yellow-800">Para melhor divulgação, envie o logo em formato vetorial (AI, SVG ou EPS). Caso não tenha, podemos usar versão JPG/PNG.</p>
            </div>
          </div>
        </div>

        <div id="nomeEmpresaContainer" class="hidden mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="empresa">
            Nome da empresa <span class="text-red-500">*</span>
            <span class="text-blue-500 cursor-help ml-1" title="Insira o nome da empresa">
              <i class="fas fa-info-circle"></i>
            </span>
          </label>
          <input id="empresa" name="empresa" type="text"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="producao">
            É produção? <span class="text-red-500">*</span>
            <span class="text-blue-500 cursor-help ml-1" title="Selecione se a vaga é para produção">
              <i class="fas fa-info-circle"></i>
            </span>
          </label>
          <select id="producao" name="producao" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
        </div>

        <div id="avisoMarketing" class="hidden bg-red-50 border-l-4 border-red-400 p-4 mb-4 rounded">
          <div class="flex items-start">
            <div class="flex-shrink-0">
              <i class="fas fa-exclamation-triangle text-red-500 text-xl mr-3 mt-1"></i>
            </div>
            <div>
              <p class="text-red-800">O marketing NÃO está permitido divulgar vagas de produção sem logo.</p>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="presencial">
            Comparecimento presencial? <span class="text-red-500">*</span>
          </label>
          <select id="presencial" name="presencial" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Selecione</option>
            <option value="RHBrasil">RHBrasil</option>
            <option value="Outro">Outro lugar</option>
          </select>
        </div>

        <div id="outroLugar" class="hidden mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="local">
            Local para comparecer (Google Maps link) <span class="text-red-500">*</span>
          </label>
          <input id="local" name="local" type="url" placeholder="https://maps.app.goo.gl/xyz123"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div id="eventoContainer" class="hidden mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="evento">
            É evento/feirão/mutirão?
          </label>
          <select id="evento" name="evento"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="Não">Não</option>
            <option value="Feirão">Feirão</option>
            <option value="Mutirão">Mutirão</option>
          </select>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="cargo">
            Nome do cargo <span class="text-red-500">*</span>
          </label>
          <input id="cargo" name="cargo" type="text" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="recorrente">
            É uma vaga recorrente? <span class="text-red-500">*</span>
          </label>
          <select id="recorrente" name="recorrente" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
        </div>

        <div id="mediaMensalContainer" class="hidden mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="mediaMensal">
            Qual a média mensal? <span class="text-red-500">*</span>
          </label>
          <input id="mediaMensal" name="mediaMensal" type="number" 
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="tipoVaga">
            Tipo de vaga <span class="text-red-500">*</span>
          </label>
          <select id="tipoVaga" name="tipoVaga" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Selecione</option>
            <option value="Efetivo">Efetivo</option>
            <option value="Temporário">Temporário</option>
          </select>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="temDataDefinida">
            Tem data definida? <span class="text-red-500">*</span>
            <span class="text-blue-500 cursor-help ml-1" title="Se não tiver data definida, o padrão será de Segunda à Sexta">
              <i class="fas fa-info-circle"></i>
            </span>
          </label>
          <select id="temDataDefinida" name="temDataDefinida" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
        </div>

        <div id="datasContainer" class="hidden mb-4">
          <div class="tipo-container flex space-x-4 mb-4">
            <label class="inline-flex items-center">
              <input type="radio" name="tipoData" value="unico" checked class="form-radio text-blue-600">
              <span class="ml-2">Data única</span>
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="tipoData" value="intervalo" class="form-radio text-blue-600">
              <span class="ml-2">Intervalo</span>
            </label>
          </div>

          <div id="dataUnica">
            <div id="datasUnicas">
              <div class="campo-data flex items-center mb-2">
                <label class="mr-2">Data:</label>
                <input type="date" name="datas[]"
                  class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <span class="remove-btn ml-2" onclick="removerData(this)"><i class="fas fa-times"></i></span>
              </div>
            </div>
            <button type="button" onclick="adicionarData()"
              class="mt-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition">
              <i class="fas fa-plus mr-1"></i> Adicionar data
            </button>
          </div>

          <div id="dataIntervalo" class="hidden">
             <div id="datasIntervalos">
                <div class="campo-intervalo grid grid-cols-5 gap-2 items-center mb-2">
                  <label>De</label>
                  <input type="date" name="dataInicio[]"
                    class="col-span-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <label>até</label>
                  <input type="date" name="dataFim[]"
                    class="col-span-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <span class="remove-btn ml-2" onclick="removerIntervalo(this)"><i class="fas fa-times"></i></span>
                </div>
            </div>
            <button type="button" onclick="adicionarIntervalo()"
              class="mt-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition">
              <i class="fas fa-plus mr-1"></i> Adicionar intervalo
            </button>
          </div>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="temHorarioDefinido">
            Tem horário definido? <span class="text-red-500">*</span>
            <span class="text-blue-500 cursor-help ml-1" title="Se não tiver horário definido, o padrão será das 7:30 às 17:00">
              <i class="fas fa-info-circle"></i>
            </span>
          </label>
          <select id="temHorarioDefinido" name="temHorarioDefinido" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
        </div>

        <div id="horariosContainer" class="hidden mb-4">
          <div class="tipo-container flex space-x-4 mb-4">
            <label class="inline-flex items-center">
              <input type="radio" name="tipoHorario" value="unico" checked class="form-radio text-blue-600">
              <span class="ml-2">Horário único</span>
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="tipoHorario" value="intervalo" class="form-radio text-blue-600">
              <span class="ml-2">Intervalo</span>
            </label>
          </div>

          <div id="horarioUnico">
            <div id="horariosUnicos">
              <div class="campo-horario flex items-center mb-2">
                <label class="mr-2">Horário:</label>
                <input type="time" name="horarios[]"
                  class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <span class="remove-btn ml-2" onclick="removerHorario(this)"><i class="fas fa-times"></i></span>
              </div>
            </div>
            <button type="button" onclick="adicionarHorario()"
              class="mt-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition">
              <i class="fas fa-plus mr-1"></i> Adicionar horário
            </button>
          </div>

          <div id="horarioIntervalo" class="hidden">
            <div id="horariosIntervalos">
                <div class="campo-intervalo-horario grid grid-cols-5 gap-2 items-center mb-2">
                  <label>Das</label>
                  <input type="time" name="horaInicio[]"
                    class="col-span-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <label>às</label>
                  <input type="time" name="horaFim[]"
                    class="col-span-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                  <span class="remove-btn ml-2" onclick="removerHorarioIntervalo(this)"><i class="fas fa-times"></i></span>
                </div>
            </div>
             <button type="button" onclick="adicionarHorarioIntervalo()"
              class="mt-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition">
              <i class="fas fa-plus mr-1"></i> Adicionar intervalo de horário
            </button>
          </div>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="vagas">
            Quantas vagas <span class="text-red-500">*</span>
          </label>
          <input id="vagas" name="vagas" type="number" required placeholder="Ex: 1, 3, 10 ou 400"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="beneficios">
            Benefícios <span class="optional">(Opcional)</span>
          </label>
          <textarea id="beneficios" name="beneficios" rows="3"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="requisitos">
            Requisitos <span class="optional">(Opcional)</span>
          </label>
          <textarea id="requisitos" name="requisitos" rows="3"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="turnos">
            Turnos <span class="optional">(Opcional)</span>
          </label>
          <input id="turnos" name="turnos" type="text"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="joinville">
            É para Joinville? <span class="text-red-500">*</span>
          </label>
          <select id="joinville" name="joinville" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
        </div>

        <div id="cidadeOutras" class="hidden mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="outraCidade">
            Qual cidade? <span class="text-red-500">*</span>
          </label>
          <input id="outraCidade" name="outraCidade" type="text"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="notas">
            Notas adicionais (algo que só você sabe e ajuda muito?) <span class="optional">(Opcional)</span>
          </label>
          <textarea id="notas" name="notas" rows="3"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
        </div>

        <div class="mb-6">
          <label class="block text-gray-700 font-medium mb-2" for="impulsionar">
            É para impulsionar? <span class="text-red-500">*</span>
          </label>
          <select id="impulsionar" name="impulsionar" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="Não">Não</option>
            <option value="Sim">Sim</option>
          </select>
        </div>

        <div id="avisoImpulsionamento" class="hidden bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded">
          <div class="flex items-start">
            <div class="flex-shrink-0">
              <i class="fas fa-exclamation-triangle text-yellow-500 text-xl mr-3 mt-1"></i>
            </div>
            <div>
              <p class="text-yellow-800">Não recomendamos o impulsionamento para comparecer em menos de 4 dias</p>
            </div>
          </div>
        </div>

        <div class="flex justify-between mt-8">
          <button id="btnFinalizarPDF" type="button" class="px-6 py-3 bg-green-600 text-white font-medium rounded-md hover:bg-green-700 transition flex items-center">
            <i class="fas fa-paper-plane mr-2"></i> Finalizar e Enviar por E-mail
          </button>
          <button id="btnContinuar" type="button" class="px-6 py-3 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 transition flex items-center" style="display: none;">
            Continuar para Impulsionamento <i class="fas fa-arrow-right ml-2"></i>
          </button>
        </div>
      </section>

      <!-- Seção 2 - Impulsionamento -->
      <section id="sessao2" class="form-section">
        <h2 class="text-2xl font-bold text-blue-700 border-b border-blue-200 pb-3 mb-6 flex items-center">
          <i class="fas fa-rocket mr-2"></i> Sessão 2 - Impulsionamento
        </h2>

        <div id="avisoImpulsionamento4dias" class="hidden bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded">
          <div class="flex items-start">
            <div class="flex-shrink-0">
              <i class="fas fa-exclamation-triangle text-yellow-500 text-xl mr-3 mt-1"></i>
            </div>
            <div>
              <p class="text-yellow-800">Não recomendamos o impulsionamento para comparecer em menos de 4 dias</p>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="genero">
            Gênero <span class="text-red-500">*</span>
          </label>
          <select id="genero" name="genero" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="Ambos" selected>Ambos</option>
            <option value="Masculino">Masculino</option>
            <option value="Feminino">Feminino</option>
          </select>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div>
            <label class="block text-gray-700 font-medium mb-2" for="idadeMinima">
              Idade mínima <span class="text-red-500">*</span>
            </label>
            <input id="idadeMinima" name="idadeMinima" type="number" value="18" required min="18" max="100"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-2" for="idadeMaxima">
              Idade máxima <span class="text-red-500">*</span>
            </label>
            <input id="idadeMaxima" name="idadeMaxima" type="number" value="55" required min="18" max="100"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="dias">
            Quantos dias de impulsionamento? <span class="text-red-500">*</span>
          </label>
          <input id="dias" name="dias" type="number" value="4" required min="1"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-2" for="orcamento">
            Qual orçamento sugerido por dia? <span class="text-red-500">*</span>
          </label>
          <input id="orcamento" name="orcamento" type="text" value="R$50,00" required
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div id="bairrosJoinvilleContainer" class="mb-6">
          <label class="block text-gray-700 font-medium mb-2" for="bairros">
            Quais bairros? <span class="text-red-500">*</span>
          </label>
          
          <div class="bairros-container bg-white border border-gray-300 rounded-md overflow-hidden">
            <div class="bairros-search p-2 border-b border-gray-300">
              <input type="text" placeholder="Buscar bairro..." id="bairroSearch"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div class="bairros-list p-2">
              <select multiple="multiple" id="bairros" name="bairros" required
                class="w-full h-40 px-3 py-2 border-none">
                <option value="toda">Toda Joinville</option>
                <optgroup label="CentroNorte">
                  <option value="Centro">Centro</option>
                  <option value="Bom Retiro">Bom Retiro</option>
                  <option value="Pirabeiraba/Centro">Pirabeiraba/Centro</option>
                  <option value="América">América</option>
                  <option value="Atiradores">Atiradores</option>
                  <option value="Costa e Silva">Costa e Silva</option>
                  <option value="Dona Francisca">Dona Francisca</option>
                  <option value="Glória">Glória</option>
                  <option value="Jardim Paraíso">Jardim Paraíso</option>
                  <option value="Jardim Sofia">Jardim Sofia</option>
                  <option value="Rio Bonito">Rio Bonito</option>
                  <option value="Saguaçu">Saguaçu</option>
                  <option value="Santo Antônio">Santo Antônio</option>
                  <option value="Santa Catarina">Santa Catarina</option>
                  <option value="Zona Industrial Norte">Zona Industrial Norte</option>
                </optgroup>
                <optgroup label="Zona Leste">
                  <option value="Aventureiro">Aventureiro</option>
                  <option value="Boa Vista">Boa Vista</option>
                  <option value="Comasa">Comasa</option>
                  <option value="Espinheiros">Espinheiros</option>
                  <option value="Iririú">Iririú</option>
                  <option value="Jardim Iririú">Jardim Iririú</option>
                  <option value="Vila Cubatão">Vila Cubatão</option>
                  <option value="Zona Industrial Tupy">Zona Industrial Tupy</option>
                </optgroup>
                <optgroup label="Zona Sul">
                  <option value="Adhemar Garcia">Adhemar Garcia</option>
                  <option value="Anita Garibaldi">Anita Garibaldi</option>
                  <option value="Boehmerwald">Boehmerwald</option>
                  <option value="Bucarein">Bucarein</option>
                  <option value="Fátima">Fátima</option>
                  <option value="Floresta">Floresta</option>
                  <option value="Guanabara">Guanabara</option>
                  <option value="Itaum">Itaum</option>
                  <option value="Itinga">Itinga</option>
                  <option value="Jarivatuba">Jarivatuba</option>
                  <option value="João Costa">João Costa</option>
                  <option value="Paranaguamirim">Paranaguamirim</option>
                  <option value="Parque Guarani">Parque Guarani</option>
                  <option value="Petrópolis">Petrópolis</option>
                  <option value="Profipo">Profipo</option>
                </optgroup>
                <optgroup label="Zona Oeste">
                  <option value="Morro do Meio">Morro do Meio</option>
                  <option value="Nova Brasília">Nova Brasília</option>
                  <option value="São Marcos">São Marcos</option>
                  <option value="Ulysses Guimarães">Ulysses Guimarães</option>
                  <option value="Vila Nova">Vila Nova</option>
                </optgroup>
              </select>
            </div>
          </div>
        </div>

        <div id="outrosBairrosContainer" class="hidden mb-6">
          <label class="block text-gray-700 font-medium mb-2" for="outrosBairros">
            Quais bairros? <span class="text-red-500">*</span>
          </label>
          <input id="outrosBairros" name="outrosBairros" type="text"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="flex justify-between mt-8">
          <button type="button" class="px-6 py-3 bg-gray-600 text-white font-medium rounded-md hover:bg-gray-700 transition flex items-center" onclick="voltarSessao(1)">
            <i class="fas fa-arrow-left mr-2"></i> Voltar
          </button>
          <button type="button" class="px-6 py-3 bg-green-600 text-white font-medium rounded-md hover:bg-green-700 transition flex items-center" id="btnSalvarPDF">
            <i class="fas fa-paper-plane mr-2"></i> Finalizar e Enviar por E-mail
          </button>
        </div>
      </section>

    </form>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const elementos = {
        form: document.getElementById("vagaForm"),
        // Sessão 1
        analista: document.getElementById("analista"),
        whatsapp: document.getElementById("whatsapp"),
        divulgaLogo: document.getElementById("divulgaLogo"),
        avisoLogo: document.getElementById("avisoLogo"),
        nomeEmpresaContainer: document.getElementById("nomeEmpresaContainer"),
        empresa: document.getElementById("empresa"),
        producao: document.getElementById("producao"),
        avisoMarketing: document.getElementById("avisoMarketing"),
        presencial: document.getElementById("presencial"),
        outroLugar: document.getElementById("outroLugar"),
        local: document.getElementById("local"),
        eventoContainer: document.getElementById("eventoContainer"),
        cargo: document.getElementById("cargo"),
        recorrente: document.getElementById("recorrente"),
        mediaMensalContainer: document.getElementById("mediaMensalContainer"),
        mediaMensal: document.getElementById("mediaMensal"),
        tipoVaga: document.getElementById("tipoVaga"),
        temDataDefinida: document.getElementById("temDataDefinida"),
        datasContainer: document.getElementById("datasContainer"),
        dataUnica: document.getElementById("dataUnica"),
        datasUnicas: document.getElementById("datasUnicas"),
        dataIntervalo: document.getElementById("dataIntervalo"),
        datasIntervalos: document.getElementById("datasIntervalos"),
        temHorarioDefinido: document.getElementById("temHorarioDefinido"),
        horariosContainer: document.getElementById("horariosContainer"),
        horarioUnico: document.getElementById("horarioUnico"),
        horariosUnicos: document.getElementById("horariosUnicos"),
        horarioIntervalo: document.getElementById("horarioIntervalo"),
        horariosIntervalos: document.getElementById("horariosIntervalos"),
        vagas: document.getElementById("vagas"),
        joinville: document.getElementById("joinville"),
        cidadeOutras: document.getElementById("cidadeOutras"),
        outraCidade: document.getElementById("outraCidade"),
        impulsionar: document.getElementById("impulsionar"),
        avisoImpulsionamento: document.getElementById("avisoImpulsionamento"),
        btnFinalizarPDF: document.getElementById("btnFinalizarPDF"),
        btnContinuar: document.getElementById("btnContinuar"),
        
        // Sessão 2
        sessao1: document.getElementById("sessao1"),
        sessao2: document.getElementById("sessao2"),
        avisoImpulsionamento4dias: document.getElementById("avisoImpulsionamento4dias"),
        genero: document.getElementById("genero"),
        idadeMinima: document.getElementById("idadeMinima"),
        idadeMaxima: document.getElementById("idadeMaxima"),
        dias: document.getElementById("dias"),
        orcamento: document.getElementById("orcamento"),
        bairrosJoinvilleContainer: document.getElementById("bairrosJoinvilleContainer"),
        bairroSearch: document.getElementById("bairroSearch"),
        bairros: document.getElementById("bairros"),
        outrosBairrosContainer: document.getElementById("outrosBairrosContainer"),
        outrosBairros: document.getElementById("outrosBairros"),
        btnSalvarPDF: document.getElementById("btnSalvarPDF"),

        // Indicador de Progresso
        step1: document.getElementById('step1').querySelector('div'),
        step2: document.getElementById('step2').querySelector('div'),
    };

    const mascaras = {
        aplicarMascaraTelefone(event) {
            let value = event.target.value.replace(/\D/g, "");
            value = value.substring(0, 11);
            if (value.length > 10) {
                value = value.replace(/^(\d{2})(\d{5})(\d{4}).*/, "($1) $2-$3");
            } else if (value.length > 5) {
                value = value.replace(/^(\d{2})(\d{4})(\d{0,4}).*/, "($1) $2-$3");
            } else if (value.length > 2) {
                value = value.replace(/^(\d{2})(\d*)/, "($1) $2");
            } else {
                value = value.replace(/^(\d*)/, "($1");
            }
            event.target.value = value;
        },
        aplicarMascaraValor(event) {
            let value = event.target.value.replace(/\D/g, "");
            if (value === "") {
                event.target.value = "";
                return;
            }
            value = (parseInt(value, 10) / 100).toLocaleString('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            });
            event.target.value = value;
        }
    };

    const validacao = {
        validarSessao(numSessao) {
            const sessao = document.getElementById(`sessao${numSessao}`);
            sessao.querySelectorAll('.invalid').forEach(el => el.classList.remove('invalid'));
            
            const inputs = sessao.querySelectorAll('input[required], select[required], textarea[required]');
            const errors = [];

            const getLabelText = (input) => {
                const label = sessao.querySelector(`label[for="${input.id}"]`);
                if (label) {
                    const clone = label.cloneNode(true);
                    clone.querySelectorAll('span').forEach(s => s.remove());
                    return clone.textContent.trim();
                }
                return input.name || input.id || 'Campo desconhecido';
            };

            inputs.forEach(input => {
                if (input.offsetParent !== null) { 
                    if (!input.value.trim()) {
                        errors.push(`O campo "<b>${getLabelText(input)}</b>" é obrigatório.`);
                        input.classList.add('invalid');
                    }
                }
            });

            if (numSessao === 1) {
                if (elementos.temDataDefinida.value === 'Sim' && elementos.datasContainer.offsetParent !== null) {
                    const tipoData = document.querySelector('input[name="tipoData"]:checked').value;
                    if (tipoData === 'unico') {
                        const datasInputs = elementos.datasUnicas.querySelectorAll('input[name="datas[]"]');
                        if ([...datasInputs].every(d => !d.value)) {
                            errors.push("Adicione pelo menos uma <b>data</b>.");
                            datasInputs.forEach(d => d.classList.add('invalid'));
                        }
                    } else { 
                        const intervalosInputs = elementos.datasIntervalos.querySelectorAll('.campo-intervalo');
                        if ([...intervalosInputs].some(i => !i.querySelector('input[name="dataInicio[]"]').value || !i.querySelector('input[name="dataFim[]"]').value)) {
                            errors.push("Preencha todos os campos de <b>intervalo de datas</b>.");
                             intervalosInputs.forEach(i => {
                                 if(!i.querySelector('input[name="dataInicio[]"]').value) i.querySelector('input[name="dataInicio[]"]').classList.add('invalid')
                                 if(!i.querySelector('input[name="dataFim[]"]').value) i.querySelector('input[name="dataFim[]"]').classList.add('invalid')
                             });
                        }
                    }
                }
                 if (elementos.temHorarioDefinido.value === 'Sim' && elementos.horariosContainer.offsetParent !== null) {
                    const tipoHorario = document.querySelector('input[name="tipoHorario"]:checked').value;
                    if (tipoHorario === 'unico') {
                         const horariosInputs = elementos.horariosUnicos.querySelectorAll('input[name="horarios[]"]');
                        if ([...horariosInputs].every(h => !h.value)) {
                            errors.push("Adicione pelo menos um <b>horário</b>.");
                            horariosInputs.forEach(h => h.classList.add('invalid'));
                        }
                    } else { 
                        const horariosIntervalosInputs = elementos.horariosIntervalos.querySelectorAll('.campo-intervalo-horario');
                        if ([...horariosIntervalosInputs].some(i => !i.querySelector('input[name="horaInicio[]"]').value || !i.querySelector('input[name="horaFim[]"]').value)) {
                            errors.push("Preencha todos os campos de <b>intervalo de horários</b>.");
                             horariosIntervalosInputs.forEach(i => {
                                 if(!i.querySelector('input[name="horaInicio[]"]').value) i.querySelector('input[name="horaInicio[]"]').classList.add('invalid')
                                 if(!i.querySelector('input[name="horaFim[]"]').value) i.querySelector('input[name="horaFim[]"]').classList.add('invalid')
                             });
                        }
                    }
                }
            }
            
            if (errors.length > 0) {
                Swal.fire({
                    icon: 'error',
                    title: 'Campos Obrigatórios',
                    html: `<div class="text-left">Por favor, preencha os seguintes campos:<br><ul class="list-disc list-inside mt-2">${errors.map(e => `<li>${e}</li>`).join('')}</ul></div>`,
                });
                const firstInvalid = sessao.querySelector('.invalid');
                if (firstInvalid) {
                    firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    firstInvalid.focus();
                }
                return false;
            }

            return true;
        }
    };

    function updateProgress(step) {
        if (step === 1) {
            elementos.step1.classList.remove('bg-gray-300');
            elementos.step1.classList.add('bg-green-500');
            elementos.step2.classList.remove('bg-green-500');
            elementos.step2.classList.add('bg-gray-300');
        } else if (step === 2) {
            elementos.step2.classList.remove('bg-gray-300');
            elementos.step2.classList.add('bg-green-500');
        }
    }
    
    function navigateTo(sessaoId) {
        document.querySelectorAll('.form-section').forEach(section => {
            section.classList.remove('active');
        });
        document.getElementById(sessaoId).classList.add('active');
        const step = sessaoId === 'sessao1' ? 1 : 2;
        updateProgress(step);
    }

    elementos.divulgaLogo.addEventListener('change', (e) => {
        const showEmpresa = e.target.value === 'Sim';
        elementos.avisoLogo.classList.toggle('hidden', !showEmpresa);
        elementos.nomeEmpresaContainer.classList.toggle('hidden', !showEmpresa);
        elementos.empresa.required = showEmpresa;
        if (!showEmpresa) {
            elementos.empresa.value = '';
            elementos.empresa.classList.remove('invalid', 'valid');
        }
        checkMarketingWarning();
    });

    elementos.producao.addEventListener('change', checkMarketingWarning);

    function checkMarketingWarning() {
        const divulga = elementos.divulgaLogo.value;
        const prod = elementos.producao.value;
        elementos.avisoMarketing.classList.toggle('hidden', !(divulga === 'Não' && prod === 'Sim'));
    }

    elementos.presencial.addEventListener('change', (e) => {
        const isOutro = e.target.value === 'Outro';
        elementos.outroLugar.classList.toggle('hidden', !isOutro);
        elementos.eventoContainer.classList.toggle('hidden', !isOutro);
        elementos.local.required = isOutro;
    });
    
    elementos.recorrente.addEventListener('change', (e) => {
      const isRecorrente = e.target.value === 'Sim';
      elementos.mediaMensalContainer.classList.toggle('hidden', !isRecorrente);
      elementos.mediaMensal.required = isRecorrente;
    });

    elementos.temDataDefinida.addEventListener('change', (e) => {
        const show = e.target.value === 'Sim';
        elementos.datasContainer.classList.toggle('hidden', !show);
        checkBoostDateWarning();
    });

    document.querySelectorAll('input[name="tipoData"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
            const isUnico = e.target.value === 'unico';
            elementos.dataUnica.classList.toggle('hidden', !isUnico);
            elementos.dataIntervalo.classList.toggle('hidden', isUnico);
        });
    });

    elementos.temHorarioDefinido.addEventListener('change', (e) => {
        const show = e.target.value === 'Sim';
        elementos.horariosContainer.classList.toggle('hidden', !show);
    });

    document.querySelectorAll('input[name="tipoHorario"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
            const isUnico = e.target.value === 'unico';
            elementos.horarioUnico.classList.toggle('hidden', !isUnico);
            elementos.horarioIntervalo.classList.toggle('hidden', isUnico);
        });
    });

    elementos.joinville.addEventListener('change', (e) => {
        const isNaoJoinville = e.target.value === 'Não';
        elementos.cidadeOutras.classList.toggle('hidden', !isNaoJoinville);
        elementos.outraCidade.required = isNaoJoinville;
        
        if (elementos.sessao2.offsetParent !== null) {
            elementos.bairrosJoinvilleContainer.classList.toggle('hidden', isNaoJoinville);
            elementos.outrosBairrosContainer.classList.toggle('hidden', !isNaoJoinville);
            elementos.bairros.required = !isNaoJoinville;
            elementos.outrosBairros.required = isNaoJoinville;
        }
    });

    elementos.impulsionar.addEventListener('change', async (e) => {
        const impulsionar = e.target.value === 'Sim';
        elementos.btnContinuar.style.display = impulsionar ? 'flex' : 'none';
        elementos.btnFinalizarPDF.style.display = impulsionar ? 'none' : 'flex';

        if (!impulsionar && elementos.sessao2.classList.contains('active')) {
             const result = await Swal.fire({
                title: 'Atenção',
                text: 'Ao desativar o impulsionamento, os dados da Sessão 2 serão perdidos. Deseja continuar?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Sim, limpar',
                cancelButtonText: 'Não, manter'
            });
            if (result.isConfirmed) {
                limparSessao2();
            } else {
                e.target.value = 'Sim';
                elementos.btnContinuar.style.display = 'flex';
                elementos.btnFinalizarPDF.style.display = 'none';
            }
        }
        checkBoostDateWarning();
    });

    elementos.form.querySelectorAll('input, select, textarea').forEach(input => {
       input.addEventListener('input', (e) => {
            if (e.target.classList.contains('invalid')) {
                e.target.classList.remove('invalid');
            }
        });
    });

    elementos.whatsapp.addEventListener('input', mascaras.aplicarMascaraTelefone);
    elementos.orcamento.addEventListener('input', mascaras.aplicarMascaraValor);

    elementos.idadeMinima.addEventListener('change', () => {
        if (parseInt(elementos.idadeMaxima.value) < parseInt(elementos.idadeMinima.value)) {
            elementos.idadeMaxima.value = elementos.idadeMinima.value;
        }
    });
     elementos.idadeMaxima.addEventListener('change', () => {
        if (parseInt(elementos.idadeMaxima.value) < parseInt(elementos.idadeMinima.value)) {
            elementos.idadeMinima.value = elementos.idadeMaxima.value;
        }
    });

    window.adicionarData = () => {
        const div = document.createElement('div');
        div.className = 'campo-data flex items-center mb-2';
        div.innerHTML = `
            <label class="mr-2">Data:</label>
            <input type="date" name="datas[]" class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <span class="remove-btn ml-2" onclick="removerData(this)"><i class="fas fa-times"></i></span>
        `;
        elementos.datasUnicas.appendChild(div);
    };
    window.removerData = (el) => el.parentElement.remove();

    window.adicionarIntervalo = () => {
        const div = document.createElement('div');
        div.className = 'campo-intervalo grid grid-cols-5 gap-2 items-center mb-2';
        div.innerHTML = `
            <label>De</label>
            <input type="date" name="dataInicio[]" class="col-span-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <label>até</label>
            <input type="date" name="dataFim[]" class="col-span-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <span class="remove-btn ml-2" onclick="removerIntervalo(this)"><i class="fas fa-times"></i></span>
        `;
        elementos.datasIntervalos.appendChild(div);
    };
    window.removerIntervalo = (el) => el.parentElement.remove();
    
    window.adicionarHorario = () => {
        const div = document.createElement('div');
        div.className = 'campo-horario flex items-center mb-2';
        div.innerHTML = `
            <label class="mr-2">Horário:</label>
            <input type="time" name="horarios[]" class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <span class="remove-btn ml-2" onclick="removerHorario(this)"><i class="fas fa-times"></i></span>
        `;
        elementos.horariosUnicos.appendChild(div);
    };
    window.removerHorario = (el) => el.parentElement.remove();

    window.adicionarHorarioIntervalo = () => {
        const div = document.createElement('div');
        div.className = 'campo-intervalo-horario grid grid-cols-5 gap-2 items-center mb-2';
        div.innerHTML = `
            <label>Das</label>
            <input type="time" name="horaInicio[]" class="col-span-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <label>às</label>
            <input type="time" name="horaFim[]" class="col-span-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            <span class="remove-btn ml-2" onclick="removerHorarioIntervalo(this)"><i class="fas fa-times"></i></span>
        `;
        elementos.horariosIntervalos.appendChild(div);
    };
    window.removerHorarioIntervalo = (el) => el.parentElement.remove();


    elementos.btnContinuar.addEventListener('click', () => {
        if (validacao.validarSessao(1)) {
            navigateTo('sessao2');
            checkBoostDateWarning();
        }
    });

    window.voltarSessao = (numSessao) => {
        navigateTo(`sessao${numSessao}`);
    };

    elementos.btnFinalizarPDF.addEventListener('click', () => {
        if (validacao.validarSessao(1)) {
            enviarFormularioPorEmail();
        }
    });

    elementos.btnSalvarPDF.addEventListener('click', () => {
        if (validacao.validarSessao(1) && validacao.validarSessao(2)) {
            enviarFormularioPorEmail();
        }
    });

    function limparSessao2() {
        elementos.sessao2.querySelectorAll('input, select').forEach(input => {
            if(input.type === 'number' || input.type === 'text') input.value = '';
            if(input.tagName === 'SELECT') input.selectedIndex = 0;
            input.classList.remove('valid', 'invalid');
        });
        elementos.idadeMinima.value = "18";
        elementos.idadeMaxima.value = "55";
        elementos.dias.value = "4";
        elementos.orcamento.value = "R$50,00";
        elementos.genero.value = "Ambos";
    }

    function checkBoostDateWarning() {
        let showWarning = false;
        if (elementos.impulsionar.value === 'Sim' && elementos.temDataDefinida.value === 'Sim') {
            const hoje = new Date();
            const limite = new Date(hoje.setDate(hoje.getDate() + 4));
            
            const datas = document.querySelectorAll('input[name="datas[]"], input[name="dataInicio[]"]');
            datas.forEach(input => {
                if (input.value) {
                    const dataSelecionada = new Date(input.value + "T00:00:00");
                    if (dataSelecionada <= limite) {
                        showWarning = true;
                    }
                }
            });
        }
        elementos.avisoImpulsionamento.classList.toggle('hidden', !showWarning);
        if (elementos.sessao2.classList.contains('active')) {
            elementos.avisoImpulsionamento4dias.classList.toggle('hidden', !showWarning);
        }
    }
    
    elementos.bairroSearch.addEventListener('input', (e) => {
        const termo = e.target.value.toLowerCase();
        const options = elementos.bairros.options;
        for (let i = 0; i < options.length; i++) {
            const option = options[i];
            const optgroup = option.parentElement;
            
            const textoOpcao = option.text.toLowerCase();
            const corresponde = textoOpcao.includes(termo);
            option.style.display = corresponde ? '' : 'none';
        }

        const optgroups = elementos.bairros.getElementsByTagName('optgroup');
        for (let i = 0; i < optgroups.length; i++) {
            const optgroup = optgroups[i];
            const opcoesVisiveis = optgroup.querySelectorAll('option[style=""]');
            optgroup.style.display = opcoesVisiveis.length > 0 ? '' : 'none';
        }
    });

    function enviarFormularioPorEmail() {
        Swal.fire({
            title: 'Preparando E-mail...',
            text: 'Aguarde um momento.',
            allowOutsideClick: false,
            didOpen: () => { Swal.showLoading(); }
        });

        const getLabelFor = (elementId) => {
            const label = document.querySelector(`label[for="${elementId}"]`);
            if (label) {
                const clone = label.cloneNode(true);
                clone.querySelectorAll('span').forEach(s => s.remove());
                return clone.textContent.trim();
            }
            return elementId;
        };

        let body = "DADOS DA VAGA\n";
        body += "-------------------------------------\n";

        const fieldsSessao1 = ['analista', 'whatsapp', 'divulgaLogo', 'empresa', 'producao', 'presencial', 'local', 'evento', 'cargo', 'recorrente', 'mediaMensal', 'tipoVaga', 'vagas', 'beneficios', 'requisitos', 'turnos', 'joinville', 'outraCidade', 'notas', 'impulsionar'];
        fieldsSessao1.forEach(id => {
            const el = document.getElementById(id);
            if (el && el.value) {
                body += `${getLabelFor(id)}: ${el.value}\n`;
            }
        });

        if(elementos.temDataDefinida.value === 'Sim') {
            const tipoData = document.querySelector('input[name="tipoData"]:checked').value;
             let datasStr = '';
            if (tipoData === 'unico') {
                const datas = [...document.querySelectorAll('input[name="datas[]"]')].map(d => d.value).filter(Boolean);
                datasStr = datas.join(', ');
            } else {
                 const intervalos = [...document.querySelectorAll('#datasIntervalos .campo-intervalo')].map(i => {
                    const start = i.querySelector('input[name="dataInicio[]"]').value;
                    const end = i.querySelector('input[name="dataFim[]"]').value;
                    return (start && end) ? `de ${start} até ${end}` : null;
                }).filter(Boolean);
                datasStr = intervalos.join('; ');
            }
            if(datasStr) body += `Datas Definidas: ${datasStr}\n`;

        } else {
             body += 'Datas Definidas: Não (Padrão: Segunda à Sexta)\n';
        }

         if(elementos.temHorarioDefinido.value === 'Sim') {
            const tipoHorario = document.querySelector('input[name="tipoHorario"]:checked').value;
            let horariosStr = '';
            if(tipoHorario === 'unico') {
                const horarios = [...document.querySelectorAll('input[name="horarios[]"]')].map(h => h.value).filter(Boolean);
                horariosStr = horarios.join(', ');
            } else {
                 const intervalos = [...document.querySelectorAll('#horariosIntervalos .campo-intervalo-horario')].map(i => {
                    const start = i.querySelector('input[name="horaInicio[]"]').value;
                    const end = i.querySelector('input[name="horaFim[]"]').value;
                    return (start && end) ? `das ${start} às ${end}` : null;
                }).filter(Boolean);
                horariosStr = intervalos.join('; ');
            }
             if(horariosStr) body += `Horários Definidos: ${horariosStr}\n`;
         } else {
             body += 'Horários Definidos: Não (Padrão: 7:30 às 17:00)\n';
         }

        if (elementos.impulsionar.value === 'Sim') {
            body += "\n\nDADOS DE IMPULSIONAMENTO\n";
            body += "-------------------------------------\n";
            const fieldsSessao2 = ['genero', 'idadeMinima', 'idadeMaxima', 'dias', 'orcamento'];
             fieldsSessao2.forEach(id => {
                const el = document.getElementById(id);
                if (el && el.value) {
                    let value = el.value;
                    if(id === 'idadeMinima' || id === 'idadeMaxima') {
                        value = `${el.value} anos`;
                    }
                   body += `${getLabelFor(id)}: ${value}\n`;
                }
            });

             if (elementos.joinville.value === 'Sim') {
                const bairrosSelecionados = [...elementos.bairros.selectedOptions].map(o => o.text).join(', ');
                body += `Bairros (Joinville): ${bairrosSelecionados}\n`;
            } else {
                body += `Bairros (Outra Cidade): ${elementos.outrosBairros.value}\n`;
            }
        }
        
        const subject = `Requisição de Vaga: ${elementos.cargo.value || 'Nova Vaga'}`;
        const to = "gustavo.rocha@rhbrasil.com.br,larissa.moraes@rhbrasil.com.br";
        
        const mailtoLink = `mailto:${to}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        
        window.location.href = mailtoLink;
        Swal.close();
    }


    updateProgress(1);
});
</script>
</body>
</html>
